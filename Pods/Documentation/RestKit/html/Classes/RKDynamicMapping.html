<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>RKDynamicMapping Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<meta name="viewport" content="width=550" />
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.1 (build 840)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">RestKit 0.20.0pre6 </a></h1>
				<a id="developerHome" href="../index.html">Blake Watters</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">RKDynamicMapping Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/matchers">&nbsp;&nbsp;&nbsp;&nbsp;matchers</option>
	
	<option value="//api/name/objectMappings">&nbsp;&nbsp;&nbsp;&nbsp;objectMappings</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/addMatcher:">&nbsp;&nbsp;&nbsp;&nbsp;- addMatcher:</option>
	
	<option value="//api/name/objectMappingForRepresentation:">&nbsp;&nbsp;&nbsp;&nbsp;- objectMappingForRepresentation:</option>
	
	<option value="//api/name/removeMatcher:">&nbsp;&nbsp;&nbsp;&nbsp;- removeMatcher:</option>
	
	<option value="//api/name/setObjectMappingForRepresentationBlock:">&nbsp;&nbsp;&nbsp;&nbsp;- setObjectMappingForRepresentationBlock:</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Configuring Block Mapping Selection">Configuring Block Mapping Selection</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#task_Retrieving the Object Mapping for an Object Representation">Retrieving the Object Mapping for an Object Representation</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/matchers">matchers</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/objectMappings">objectMappings</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/addMatcher:">addMatcher:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/objectMappingForRepresentation:">objectMappingForRepresentation:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/removeMatcher:">removeMatcher:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/setObjectMappingForRepresentationBlock:">setObjectMappingForRepresentationBlock:</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="RKDynamicMapping Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">RKDynamicMapping Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value"><a href="../Classes/RKMapping.html">RKMapping</a> : NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">RKDynamicMapping.h</td>
</tr>
						</tbody></table></div>
					
					
					
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>The <code>RKDynamicMapping</code> class is an <a href="../Classes/RKMapping.html"><code>RKMapping</code></a> subclass that provides an interface for deferring the decision about how a given object representation is to be mapped until run time. This enables many interesting mapping strategies, such as mapping similarly structured data differently and constructing object mappings at run time by examining the data being mapped.</p>

<h2>Configuring Mapping Selection</h2>

<p>Dynamic mappings support the selection of the concrete object mapping in one of two ways:</p>

<ol>
<li>Through the use of a mapping selection block configured by <a href="#//api/name/setObjectMappingForRepresentationBlock:"><code>setObjectMappingForRepresentationBlock:</code></a>. When configured, the block is called with a reference to the current object representation being mapped and is expected to return an <a href="../Classes/RKObjectMapping.html"><code>RKObjectMapping</code></a> object. Returning <code>nil</code> declines the mapping of the representation.</li>
<li>Through the configuration of one of more <a href="../Classes/RKObjectMappingMatcher.html"><code>RKObjectMappingMatcher</code></a> objects. The <a href="#//api/name/matchers">matchers</a> are consulted in registration order and the first matcher to return an object mapping is used to map the matched representation.</li>
</ol>


<p>When both a mapping selection block and <a href="#//api/name/matchers">matchers</a> are configured on a <code>RKDynamicMapping</code> object, the matcher objects are consulted first and if none match, the selection block is invoked.</p>

<h2>Using Matcher Objects</h2>

<p>The <a href="../Classes/RKObjectMappingMatcher.html"><code>RKObjectMappingMatcher</code></a> class provides an interface for evaluating a key path or predicate based match and returning an appropriate object mapping. Matchers can be added to the <code>RKDynamicMapping</code> objects to declaratively describe a particular mapping strategy.</p>

<p>For example, suppose that we have a JSON fragment for a person that we want to map differently based on the gender of the person. When the gender is &lsquo;male&rsquo;, we want to use the Boy class and when then the gender is &lsquo;female&rsquo; we want to use the Girl class. The JSON might look something like this:</p>

<pre><code>[ { "name": "Blake", "gender": "male" }, { "name": "Sarah", "gender": "female" } ]
</code></pre>

<p>We might define configure the dynamic mapping like so:</p>

<pre><code>RKDynamicMapping *mapping = [RKDynamicMapping new];
RKObjectMapping *boyMapping = [RKObjectMapping mappingForClass:[Boy class]];
RKObjectMapping *girlMapping = [RKObjectMapping mappingForClass:[Girl class]];
[mapping addMatcher:[RKObjectMappingMatcher matcherWithKeyPath:@"gender" expectedValue:@"male" objectMapping:boyMapping]];
[mapping addMatcher:[RKObjectMappingMatcher matcherWithKeyPath:@"gender" expectedValue:@"female" objectMapping:girlMapping]];
</code></pre>

<p>When evaluated, the <a href="#//api/name/matchers">matchers</a> will invoke <code>valueForKeyPath:@"gender"</code> against each dictionary in the array of object representations and apply the appropriate object mapping for each representation. This would return a mapping result containing an array of two objects, one an instance of the <code>Boy</code> class and the other an instance of the <code>Girl</code> class.</p>

<h2>HTTP Integration</h2>

<p>Dynamic mappings can be used to map HTTP requests and responses by adding them to an <a href="../Classes/RKRequestDescriptor.html"><code>RKRequestDescriptor</code></a> or <a href="../Classes/RKResponseDescriptor.html"><code>RKResponseDescriptor</code></a> objects.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						<a title="Configuring Block Mapping Selection" name="task_Configuring Block Mapping Selection"></a>
						<h3 class="subsubtitle task-title">Configuring Block Mapping Selection</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/setObjectMappingForRepresentationBlock:">&ndash;&nbsp;setObjectMappingForRepresentationBlock:</a></code>
		<span class="tooltip"><p>Sets a block to be invoked to determine the appropriate concrete object mapping with which to map an object representation.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/matchers">&nbsp;&nbsp;matchers</a></code>
		<span class="tooltip"><p>Returns the array of matchers objects added to the receiver.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/addMatcher:">&ndash;&nbsp;addMatcher:</a></code>
		<span class="tooltip"><p>Adds a matcher to the receiver.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/removeMatcher:">&ndash;&nbsp;removeMatcher:</a></code>
		<span class="tooltip"><p>Removes a matcher from the receiver.</p></span>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/objectMappings">&nbsp;&nbsp;objectMappings</a></code>
		<span class="tooltip"><p>Returns an array of object mappings that have been registered with the receiver.</p></span>
	</span>
	<span class="task-item-suffix">property</span>
	
</li>
						</ul>
						
						
						<a title="Retrieving the Object Mapping for an Object Representation" name="task_Retrieving the Object Mapping for an Object Representation"></a>
						<h3 class="subsubtitle task-title">Retrieving the Object Mapping for an Object Representation</h3>

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/objectMappingForRepresentation:">&ndash;&nbsp;objectMappingForRepresentation:</a></code>
		<span class="tooltip"><p>Invoked by the <a href="../Classes/RKMapperOperation.html"><code>RKMapperOperation</code></a> and <a href="../Classes/RKMappingOperation.html"><code>RKMappingOperation</code></a> to determine the appropriate <a href="../Classes/RKObjectMapping.html"><code>RKObjectMapping</code></a> to use when mapping the given object representation.</p></span>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/matchers" title="matchers"></a>
	<h3 class="subsubtitle method-title">matchers</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns the array of matchers objects added to the receiver.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, strong, readonly) NSArray *matchers</code></div>

    
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Returns the array of matchers objects added to the receiver.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RKDynamicMapping.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/objectMappings" title="objectMappings"></a>
	<h3 class="subsubtitle method-title">objectMappings</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Returns an array of object mappings that have been registered with the receiver.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (nonatomic, readonly) NSArray *objectMappings</code></div>

    
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>An array of <a href="../Classes/RKObjectMapping.html"><code>RKObjectMapping</code></a> objects registered with the receiver.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Returns an array of object mappings that have been registered with the receiver.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RKDynamicMapping.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/addMatcher:" title="addMatcher:"></a>
	<h3 class="subsubtitle method-title">addMatcher:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Adds a matcher to the receiver.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)addMatcher:(RKObjectMappingMatcher *)<em>matcher</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>matcher</em></dt>
			<dd><p>The matcher to add to the receiver.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Adds a matcher to the receiver.</p>

<p>If the matcher has already been added to the receiver, then adding it again moves it to the top of the matcher stack.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RKDynamicMapping.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/objectMappingForRepresentation:" title="objectMappingForRepresentation:"></a>
	<h3 class="subsubtitle method-title">objectMappingForRepresentation:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Invoked by the <a href="../Classes/RKMapperOperation.html"><code>RKMapperOperation</code></a> and <a href="../Classes/RKMappingOperation.html"><code>RKMappingOperation</code></a> to determine the appropriate <a href="../Classes/RKObjectMapping.html"><code>RKObjectMapping</code></a> to use when mapping the given object representation.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (RKObjectMapping *)objectMappingForRepresentation:(id)<em>representation</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>representation</em></dt>
			<dd><p>The object representation that being mapped dynamically for which to determine the appropriate concrete mapping.</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>The object mapping to be used to map the given object representation.</p>
	</div>
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Invoked by the <a href="../Classes/RKMapperOperation.html"><code>RKMapperOperation</code></a> and <a href="../Classes/RKMappingOperation.html"><code>RKMappingOperation</code></a> to determine the appropriate <a href="../Classes/RKObjectMapping.html"><code>RKObjectMapping</code></a> to use when mapping the given object representation.</p>

<p>This method searches the stack of registered <a href="#//api/name/matchers">matchers</a> and then executes the block, if any, set by <a href="#//api/name/setObjectMappingForRepresentationBlock:"><code>setObjectMappingForRepresentationBlock:</code></a>. If <code>nil</code> is returned, then mapping for the representation is declined and it will not be mapped.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RKDynamicMapping.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/removeMatcher:" title="removeMatcher:"></a>
	<h3 class="subsubtitle method-title">removeMatcher:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Removes a matcher from the receiver.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)removeMatcher:(RKObjectMappingMatcher *)<em>matcher</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>matcher</em></dt>
			<dd><p>The matcher to remove from the receiver.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Removes a matcher from the receiver.</p>

<p>If the matcher has already been added to the receiver, then adding it again moves it to the top of the matcher stack.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RKDynamicMapping.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/setObjectMappingForRepresentationBlock:" title="setObjectMappingForRepresentationBlock:"></a>
	<h3 class="subsubtitle method-title">setObjectMappingForRepresentationBlock:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Sets a block to be invoked to determine the appropriate concrete object mapping with which to map an object representation.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)setObjectMappingForRepresentationBlock:(RKObjectMapping *( ^ ) ( id representation ))<em>block</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>block</em></dt>
			<dd><p>The block object to invoke to select the object mapping with which to map the given object representation. The block returns an object mapping and accepts a single parameter: the object representation being mapped.</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection discussion-section">
		<h4 class="method-subtitle">Discussion</h4>
		<p>Sets a block to be invoked to determine the appropriate concrete object mapping with which to map an object representation.</p>
	</div>
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">RKDynamicMapping.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2013 Blake Watters. All rights reserved. (Last updated: 2013-01-22)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.1 (build 840)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>